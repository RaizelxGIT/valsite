<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Will You Be My Valentine?</title>

    <style>
      :root {
        --red: #e11d48;
        --pink: #fb7185;
        --dark: #9f1239;
        --bg: #fff1f2;
      }

      * {
        box-sizing: border-box;
        font-family: "Poppins", system-ui, sans-serif;
      }

      body {
        margin: 0;
        min-height: 100vh;
        background: linear-gradient(135deg, var(--bg), #ffe4e6);
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
      }

      .container {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(12px);
        border-radius: 24px;
        padding: 24px;
        width: min(92%, 420px);
        box-shadow: 0 25px 60px rgba(225, 29, 72, 0.25);
      }

      h1 {
        text-align: center;
        color: var(--dark);
        margin-bottom: 16px;
      }

      .buttons {
        display: flex;
        gap: 12px;
        justify-content: center;
        flex-wrap: wrap;
      }

      button {
        border: 2px solid var(--pink);
        padding: 12px 24px;
        font-size: 1rem;
        border-radius: 999px;
        cursor: pointer;
        background: #ffe4e6;
        color: var(--dark);
        transition: all 0.3s ease;
        min-width: 120px;
      }

      button.selected {
        background: linear-gradient(135deg, var(--red), var(--pink)) !important;
        color: white !important;
        box-shadow: 0 12px 30px rgba(225, 29, 72, 0.55);
        transform: scale(1.08);
      }

      #submitBtn,
      #whatsappBtn {
        display: none;
        margin-top: 16px;
        width: 100%;
      }

      /* Love letter */
      .letter {
        display: none;
        background: #fff1f2;
        border-radius: 16px;
        padding: 16px;
        max-height: 320px;
        overflow-y: auto;
        font-size: 0.95rem;
        color: #881337;
        line-height: 1.6;
        margin-top: 16px;
      }

      .letter::-webkit-scrollbar {
        width: 6px;
      }

      .letter::-webkit-scrollbar-thumb {
        background: var(--pink);
        border-radius: 999px;
      }

      .hint {
        text-align: center;
        font-size: 0.85rem;
        color: #9f1239;
        opacity: 0.8;
        margin-top: 8px;
        display: none;
      }

      /* Floating hearts */
      .love {
        position: fixed;
        bottom: -10px;
        font-size: 22px;
        animation: floatUp linear infinite;
        opacity: 0.8;
        pointer-events: none;
      }

      @keyframes floatUp {
        from {
          transform: translateY(0) scale(1);
          opacity: 1;
        }
        to {
          transform: translateY(-110vh) scale(1.5);
          opacity: 0;
        }
      }
    </style>
  </head>

  <body>
    <div class="container">
      <!-- PHASE 1 -->
      <div id="choicePhase">
        <h1 id="title">Will you be my Valentine? ðŸ’˜</h1>

        <div class="buttons">
          <button id="yesBtn">Yes ðŸ’–</button>
          <button id="noBtn">No ðŸ™ƒ</button>
        </div>

        <button id="submitBtn">Submit ðŸ’Œ</button>
      </div>

      <!-- PHASE 2 + 3 -->
      <div class="letter" id="letter"></div>
      <div class="hint" id="scrollHint">Scroll to the end ðŸ’Œ</div>
      <button id="whatsappBtn">Send on WhatsApp ðŸ’š</button>
    </div>

    <audio id="song" src="lovesong.mp3"></audio>

    <script>
      const yesBtn = document.getElementById("yesBtn");
      const noBtn = document.getElementById("noBtn");
      const submitBtn = document.getElementById("submitBtn");
      const whatsappBtn = document.getElementById("whatsappBtn");
      const letter = document.getElementById("letter");
      const scrollHint = document.getElementById("scrollHint");
      const song = document.getElementById("song");
      const choicePhase = document.getElementById("choicePhase");

      // URL params
      const params = new URLSearchParams(window.location.search);
      const from = params.get("from") || "Someone";
      const to = params.get("to") || "Someone Special";

      document.getElementById("title").innerText = `Hey ${to}â€¦ ðŸ’˜  
Out of all the days and all the people,  
youâ€™re the one I want to celebrate love with.  
So tell meâ€¦ will you be my Valentine? ðŸ’–`;

      letter.innerText = `
Dear ${to},

I hope youâ€™re reading this slowlyâ€¦  
because every word here matters to me.

Some people come into your life quietly.
No big announcement.
No warning.
And then one day you realize theyâ€™ve become
a part of your everyday happiness.

You have this way of making moments feel lighter.
Of turning ordinary conversations into something I look forward to.
Of making me smile without even trying.

Loving you â€” or even just caring about you â€”
feels easy, natural, and safe.
And thatâ€™s something rare.

This isnâ€™t just about Valentineâ€™s Day.
Itâ€™s about choosing you.
Choosing laughter.
Choosing warmth.
Choosing honesty.

No pressure.
No expectations.
Just something real,
spoken from my heart,
exactly as it is.

If you ever wonder how much you mean to me,
remember this moment.

With all my love,
${from} â¤ï¸
`.trim();

      let hasSelected = false;
      let hasScrolledToEnd = false;

      function select(btn) {
        const other = btn === yesBtn ? noBtn : yesBtn;

        btn.innerText = "Yes ðŸ’–";
        other.innerText = "No ðŸ™ƒ";

        btn.classList.add("selected");
        other.classList.remove("selected");

        hasSelected = true;
        submitBtn.style.display = "block";
      }

      yesBtn.onclick = () => select(yesBtn);
      noBtn.onclick = () => select(noBtn);

      submitBtn.onclick = () => {
        song.play();
        launchConfetti();

        choicePhase.style.display = "none";
        letter.style.display = "block";
        scrollHint.style.display = "block";
      };

      letter.addEventListener("scroll", () => {
        const atBottom =
          letter.scrollTop + letter.clientHeight >= letter.scrollHeight - 5;

        if (atBottom) {
          hasScrolledToEnd = true;
          scrollHint.innerText = "One last thing ðŸ’•";
          whatsappBtn.style.display = "block";
        }
      });

      whatsappBtn.onclick = () => {
        const msg = encodeURIComponent(
          `${to} just said YES ðŸ’–ðŸ¥°\n\nFrom: ${from}`,
        );
        window.open(`https://wa.me/?text=${msg}`, "_blank");
      };

      function launchConfetti() {
        for (let i = 0; i < 120; i++) {
          const c = document.createElement("div");
          c.style.position = "fixed";
          c.style.width = "8px";
          c.style.height = "8px";
          c.style.background = ["#e11d48", "#fb7185", "#fda4af", "#fff"][
            Math.floor(Math.random() * 4)
          ];
          c.style.left = Math.random() * 100 + "vw";
          c.style.top = "-10px";
          c.style.transition = "top 3s linear, transform 3s";
          document.body.appendChild(c);

          setTimeout(() => {
            c.style.top = "110vh";
            c.style.transform = "rotate(720deg)";
          }, 10);

          setTimeout(() => c.remove(), 3000);
        }
      }

      // Floating hearts
      const hearts = ["â¤ï¸", "ðŸ’–", "ðŸ’˜", "ðŸ’ž", "ðŸŒ¹S"];
      setInterval(() => {
        const h = document.createElement("div");
        h.className = "love";
        h.innerText = hearts[Math.floor(Math.random() * hearts.length)];
        h.style.left = Math.random() * 100 + "vw";
        h.style.animationDuration = 3 + Math.random() * 4 + "s";
        document.body.appendChild(h);
        setTimeout(() => h.remove(), 7000);
      }, 350);
    </script>
  </body>
</html>
